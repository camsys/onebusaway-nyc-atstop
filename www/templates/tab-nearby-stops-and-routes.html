<ion-view title="Nearby Stops & Routes">
    <ion-nav-buttons side="right">
        <button class="button button-clear" ng-click="refresh()">
            <i class="icon ion-refresh"></i>
        </button>

        <a class="button button-clear" href="#/tab/map-nearby/{{data.lat}}/{{data.lon}}" ng-disabled="data.val">
            <i class="icon ion-earth"></i>
        </a>
    </ion-nav-buttons>

    <ion-content ng-show="data.loaded" has-bouncing="true">

		<div data-tap-disabled="true">
    	<leaflet center="center" defaults="defaults" paths="paths" height="200px"></leaflet>
		</div>
		
        <!--
        <p class="highlight">Nearby Stops:</p>

        <ion-list>
            <ion-item ng-repeat="item in data.stops | orderBy:'dist'" href="#/tab/atstop/{{item.id}}/{{item.name | encodeStopName}}">
                {{item.name}}
                <p class="routesAtStop">
                    Routes:<span ng-repeat="r in item.routes"> {{r.shortName}} </span>
                </p>
            </ion-item>
        </ion-list>
				-->

        <!-- Optional / Since every stop display routes passing it-->
        <p class="highlight">Nearby Routes:</p>
        <ion-list>
            <!--<ion-item ng-repeat="item in data.routes |limitTo:10" href="#/tab/route/{{item.id}}/{{item.shortName}}">-->
            <ion-item ng-repeat="item in data.routes |limitTo:10">
                {{item.shortName}}
                <button class="button button-positive button-small button-clear" ng-click="showOnMap(item.id)">
                    Map
                </button>
                <a class="button button-positive button-small button-clear" href="#/tab/route/{{item.id}}/{{item.shortName}}">Stops</a>
            </ion-item>
        </ion-list>

        <p>{{data.notifications}}</p>
    </ion-content>
</ion-view>
